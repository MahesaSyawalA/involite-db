-- create table incoming (restock / purchase)
CREATE TABLE inComingItems (
    iciId INT AUTO_INCREMENT PRIMARY KEY,

    itemsId INT NOT NULL,
    businessId INT NOT NULL,
    userId INT NOT NULL,

    quantity INT NOT NULL,
    unitPrice INT NOT NULL,

    totalPurchase INT GENERATED ALWAYS AS (quantity * unitPrice) STORED,

    inComingDate DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,

    -- relasi
    CONSTRAINT fk_ici_items
        FOREIGN KEY (itemsId)
        REFERENCES items(itemsId)
        ON UPDATE CASCADE
        ON DELETE RESTRICT,

    CONSTRAINT fk_ici_business
        FOREIGN KEY (businessId)
        REFERENCES business(businessId)
        ON UPDATE CASCADE
        ON DELETE RESTRICT,

    CONSTRAINT fk_ici_user
        FOREIGN KEY (userId)
        REFERENCES users(userId)
        ON UPDATE CASCADE
        ON DELETE RESTRICT
);

INSERT INTO inComingItems (itemsId, businessId, userId, quantity, unitPrice, inComingDate) VALUES
(1, 1, 1, 10, 8000,  '2024-12-25 09:00:00'),
(2, 1, 2, 15, 12000, '2024-12-25 10:00:00'),
(3, 1, 3, 20, 5000,  '2024-12-26 11:00:00'),
(4, 2, 1, 12, 9000,  '2024-12-26 13:00:00'),
(5, 2, 2, 18, 6000,  '2024-12-27 14:00:00'),
(6, 2, 3, 8,  15000, '2024-12-27 15:00:00'),
(7, 3, 4, 25, 5500,  '2024-12-28 09:30:00'),
(8, 3, 5, 5,  22000, '2024-12-28 10:30:00'),
(9, 1, 1, 30, 4000,  '2024-12-29 11:00:00'),
(10,1, 2, 10, 20000, '2024-12-29 13:00:00'),

(1, 2, 3, 14, 8000,  '2024-12-30 09:00:00'),
(2, 2, 4, 18, 12000, '2024-12-30 10:30:00'),
(3, 3, 5, 22, 5000,  '2024-12-31 11:00:00'),
(4, 3, 1, 16, 9000,  '2024-12-31 13:00:00'),
(5, 1, 2, 20, 6000,  '2025-01-01 09:00:00'),
(6, 1, 3, 12, 15000, '2025-01-01 10:30:00'),
(7, 2, 4, 28, 5500,  '2025-01-02 11:00:00'),
(8, 2, 5, 6,  22000, '2025-01-02 13:00:00'),
(9, 3, 1, 35, 4000,  '2025-01-03 14:00:00'),
(10,3, 2, 14, 20000, '2025-01-03 15:00:00'),

(1, 1, 3, 18, 8000,  '2025-01-04 09:00:00'),
(2, 1, 4, 22, 12000, '2025-01-04 10:00:00'),
(3, 1, 5, 26, 5000,  '2025-01-05 11:00:00'),
(4, 2, 1, 14, 9000,  '2025-01-05 13:00:00'),
(5, 2, 2, 24, 6000,  '2025-01-06 09:00:00'),
(6, 2, 3, 10, 15000, '2025-01-06 10:30:00'),
(7, 3, 4, 32, 5500,  '2025-01-07 11:00:00'),
(8, 3, 5, 8,  22000, '2025-01-07 13:00:00'),
(9, 1, 1, 40, 4000,  '2025-01-08 14:00:00'),
(10,1, 2, 16, 20000, '2025-01-08 15:00:00'),

(1, 2, 3, 12, 8000,  '2025-01-09 09:00:00'),
(2, 2, 4, 18, 12000, '2025-01-09 10:00:00'),
(3, 3, 5, 20, 5000,  '2025-01-10 11:00:00'),
(4, 3, 1, 15, 9000,  '2025-01-10 13:00:00'),
(5, 1, 2, 22, 6000,  '2025-01-11 09:00:00'),
(6, 1, 3, 11, 15000, '2025-01-11 10:30:00'),
(7, 2, 4, 30, 5500,  '2025-01-12 11:00:00'),
(8, 2, 5, 7,  22000, '2025-01-12 13:00:00'),
(9, 3, 1, 36, 4000,  '2025-01-13 14:00:00'),
(10,3, 2, 15, 20000, '2025-01-13 15:00:00');

